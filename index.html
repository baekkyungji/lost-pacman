<!DOCTYPE html>
<html>
	<head>
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="viewport" content="width=device-width, user-scalable=no">
		<meta charset="utf-8">
		<title>Lost Pacman</title>
		<!-- Libs -->
		<script src="https://aframe.io/releases/0.6.1/aframe.min.js"></script>
		<script src="src/lib/jsfxr.js"></script>
		<script src="src/lib/audio.js"></script>
		<script src="src/lib/sounds.js"></script>
		<script src="src/lib/colors.js"></script>
		<script src="src/lib/collisions.js"></script>
		<script src="src/lib/utils.js"></script>
		<!-- Globals -->
		<script>
			var score			= -1,
				scores			= [],
				go				= false,
				countDown		= true,
				gameOver		= false,
				gameFinish		= false,
				retry			= false,
				countDownTimer	= 1,
				newGameTimer	= 3,
				localStorageId  = 'js13k2017-lost-pacman-hscore',
				storeScore		= true,
				flagGameOver	= false,
				pacmanPos		= {x:0, z:0},
				playerPos		= {x:0, z:0};
				//localStorage.removeItem(localStorageId);
		</script>
		<!-- Components -->
		<script src="src/components/pacman.js"></script>
		<script src="src/components/phantom.js"></script>
		<script src="src/components/pointer.js"></script>
		<script src="src/components/user-interface.js"></script>
		<script src="src/components/game-state-interface.js"></script>
		<script src="src/components/check-cookie.js"></script>
		<script src="src/components/check-phantom.js"></script>
		<script src="src/components/move-player.js"></script>
		<!-- Systems -->
		<script src="src/systems/game.js"></script>
	</head>
	<body>
		<a-scene game> <!-- optional: stats -->
			<a-entity id="camera" class="player" camera="userHeight: 0.5" look-controls position="1 0 5" rotation="0 0 0" move-player check-cookie check-phantom>
				<a-entity light="color: #fff; intensity: 0.8; type: point;" position="0 0 0"></a-entity>

				<a-entity id="ui-score" user-interface text="font:kelsonsans;align:center;" position="0 0.45 -0.65"></a-entity>
				<a-entity id="ui-game-state" game-state-interface text="font:kelsonsans;align:center" position="0 0 -0.50"></a-entity>

				<a-box width="1" height="1" depth="1" cursor="fuse: true; fuseTimeout: 300" raycaster="far:1;"></a-box>
		        <a-entity  id="cursor"
						   pointer
						   cursor="fuse: false; fuseTimeout: 300"
		                   position="0 0 0"
		                   geometry="primitive: ring; radiusInner: 0.005; radiusOuter: 0.007"
		                   material="color: #f00; shader: flat"
						   raycaster="far:1">
		        </a-entity>
			</a-entity>
			<a-sky id="sky" color="#000"></a-sky>
			<a-plane id="floor" color="#000" position="15 0 14" height="28" width="30" rotation="-90 0 0"></a-plane>
		</a-scene>
	</body>
</html>
